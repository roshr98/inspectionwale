<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Professional Vehicle Inspection - InspectionWale</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="Images/logo.png" rel="icon">
    
    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icon Font -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .header-bar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .brand-logo {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .btn-logout {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .btn-logout:hover {
            transform: scale(1.05);
        }
        
        .form-wrapper {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .form-hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 50px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .form-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="40" fill="rgba(255,255,255,0.05)"/></svg>');
            opacity: 0.1;
        }
        
        .form-hero h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 42px;
            font-weight: 800;
            margin-bottom: 15px;
            position: relative;
        }
        
        .form-hero p {
            font-size: 18px;
            opacity: 0.95;
            position: relative;
        }
        
        .form-content {
            padding: 50px;
        }
        
        .section {
            margin-bottom: 40px;
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        
        .section-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-input, .form-select, .form-textarea {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checklist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
        }
        
        .check-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: #f7fafc;
            border-radius: 10px;
            transition: all 0.2s;
        }
        
        .check-item:hover {
            background: #edf2f7;
            transform: translateX(5px);
        }
        
        .check-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }
        
        .check-item label {
            cursor: pointer;
            flex: 1;
            font-size: 14px;
            color: #2d3748;
        }
        
        .rating-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .rating-option {
            flex: 1;
            min-width: 120px;
        }
        
        .rating-option input[type="radio"] {
            display: none;
        }
        
        .rating-label {
            display: block;
            padding: 15px;
            text-align: center;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .rating-option input[type="radio"]:checked + .rating-label {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }
        
        .submit-section {
            margin-top: 50px;
            padding: 40px;
            background: linear-gradient(135deg, #f6f8fb 0%, #e9ecef 100%);
            border-radius: 20px;
            text-align: center;
        }
        
        .btn-submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 60px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.4);
        }
        
        .btn-submit:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .status-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        
        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .photo-upload {
            border: 3px dashed #cbd5e0;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .photo-upload:hover {
            border-color: #667eea;
            background: #f7fafc;
        }
        
        .photo-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .photo-preview img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .info-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid #f39c12;
        }
        
        .info-box i {
            margin-right: 10px;
            color: #e67e22;
        }
    </style>
</head>
<body>
    <div class="header-bar">
        <div class="brand-logo">
            <i class="fas fa-clipboard-check"></i> InspectionWale
        </div>
        <div class="user-info">
            <span id="inspectorName" style="font-weight: 600; color: #4a5568;"></span>
            <button class="btn-logout" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <div class="form-wrapper">
        <div class="form-hero">
            <h1><i class="fas fa-car"></i> Professional Vehicle Inspection Report</h1>
            <p>Complete detailed inspection form for generating comprehensive PDF reports</p>
        </div>

        <div class="form-content">
            <div class="info-box">
                <i class="fas fa-info-circle"></i>
                <strong>Important:</strong> Fill all mandatory fields carefully. This information will be used to generate a professional inspection report.
            </div>

            <form id="inspectionForm">
                <!-- VEHICLE REGISTRATION DETAILS -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-car"></i></div>
                        <div class="section-title">Vehicle Registration Details</div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Registration Number *</label>
                            <input type="text" class="form-input" name="registrationNumber" required placeholder="e.g., MH04KD2255">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Make / Brand *</label>
                            <input type="text" class="form-input" name="make" required placeholder="e.g., Toyota, Honda">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Model *</label>
                            <input type="text" class="form-input" name="model" required placeholder="e.g., Fortuner, City">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Variant</label>
                            <input type="text" class="form-input" name="variant" placeholder="e.g., VX 4x4, ZX CVT">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Chassis Number (VIN)</label>
                            <input type="text" class="form-input" name="chassisNumber" placeholder="17-character VIN">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Engine Number</label>
                            <input type="text" class="form-input" name="engineNumber" placeholder="Engine serial number">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Year of Manufacture *</label>
                            <input type="number" class="form-input" name="manufactureYear" required min="1990" max="2025" placeholder="2020">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Registration Date</label>
                            <input type="date" class="form-input" name="registrationDate">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Color *</label>
                            <input type="text" class="form-input" name="color" required placeholder="e.g., Pearl White">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fuel Type *</label>
                            <select class="form-select" name="fuelType" required>
                                <option value="">Select Fuel Type</option>
                                <option value="Petrol">Petrol</option>
                                <option value="Diesel">Diesel</option>
                                <option value="CNG">CNG</option>
                                <option value="Electric">Electric</option>
                                <option value="Hybrid">Hybrid</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Odometer Reading (km) *</label>
                            <input type="number" class="form-input" name="odometerReading" required placeholder="45000">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Number of Owners</label>
                            <select class="form-select" name="ownersCount">
                                <option value="1">1st Owner</option>
                                <option value="2">2nd Owner</option>
                                <option value="3">3rd Owner</option>
                                <option value="4+">4+ Owners</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- OWNER DETAILS -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-user"></i></div>
                        <div class="section-title">Current Owner Details</div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Owner Name *</label>
                            <input type="text" class="form-input" name="ownerName" required placeholder="Full Name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Contact Number *</label>
                            <input type="tel" class="form-input" name="ownerContact" required placeholder="10-digit mobile">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-input" name="ownerEmail" placeholder="owner@example.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Inspection Location *</label>
                            <input type="text" class="form-input" name="location" required placeholder="City, State">
                        </div>
                    </div>
                </div>

                <!-- KEY HIGHLIGHTS -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-star"></i></div>
                        <div class="section-title">Key Highlights & Summary</div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Accidental Status *</label>
                            <div class="rating-group">
                                <div class="rating-option">
                                    <input type="radio" id="accNo" name="accidental" value="No" checked>
                                    <label for="accNo" class="rating-label">✓ No Accident</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="accMinor" name="accidental" value="Minor">
                                    <label for="accMinor" class="rating-label">⚠ Minor</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="accMajor" name="accidental" value="Major">
                                    <label for="accMajor" class="rating-label">✗ Major</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Flood Damage *</label>
                            <div class="rating-group">
                                <div class="rating-option">
                                    <input type="radio" id="floodNo" name="floodDamage" value="No" checked>
                                    <label for="floodNo" class="rating-label">✓ No</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="floodYes" name="floodDamage" value="Yes">
                                    <label for="floodYes" class="rating-label">✗ Yes</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Fire Damage *</label>
                            <div class="rating-group">
                                <div class="rating-option">
                                    <input type="radio" id="fireNo" name="fireDamage" value="No" checked>
                                    <label for="fireNo" class="rating-label">✓ No</label>
                                </div>
                                <div class="rating-option">
                                    <input type="radio" id="fireYes" name="fireDamage" value="Yes">
                                    <label for="fireYes" class="rating-label">✗ Yes</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Top Comments / Key Highlights</label>
                        <textarea class="form-textarea" name="highlights" placeholder="Summarize key findings, noteworthy observations, or important points..."></textarea>
                    </div>
                </div>

                <!-- EXTERIOR / BODY INSPECTION -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-paint-brush"></i></div>
                        <div class="section-title">Exterior / Body Inspection</div>
                    </div>
                    <div class="checklist-grid">
                        <div class="check-item">
                            <input type="checkbox" id="ext1" name="exteriorChecks" value="Bonnet - Good condition">
                            <label for="ext1">Bonnet - Good condition</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext2" name="exteriorChecks" value="Front Bumper - No damage">
                            <label for="ext2">Front Bumper - No damage</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext3" name="exteriorChecks" value="Rear Bumper - Intact">
                            <label for="ext3">Rear Bumper - Intact</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext4" name="exteriorChecks" value="Windshield - Clear, no cracks">
                            <label for="ext4">Windshield - Clear, no cracks</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext5" name="exteriorChecks" value="Headlights - Working properly">
                            <label for="ext5">Headlights - Working properly</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext6" name="exteriorChecks" value="Taillights - Functional">
                            <label for="ext6">Taillights - Functional</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext7" name="exteriorChecks" value="Roof - No dents">
                            <label for="ext7">Roof - No dents</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext8" name="exteriorChecks" value="Doors - Aligned properly">
                            <label for="ext8">Doors - Aligned properly</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext9" name="exteriorChecks" value="Boot/Trunk - Opens smoothly">
                            <label for="ext9">Boot/Trunk - Opens smoothly</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext10" name="exteriorChecks" value="Paint - Uniform finish">
                            <label for="ext10">Paint - Uniform finish</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext11" name="exteriorChecks" value="Side Mirrors - Functional">
                            <label for="ext11">Side Mirrors - Functional</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="ext12" name="exteriorChecks" value="Wipers - Good condition">
                            <label for="ext12">Wipers - Good condition</label>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Paint Depth Readings (if applicable)</label>
                        <textarea class="form-textarea" name="paintDepth" placeholder="e.g., Bonnet: 120μm, Front Bumper: 110μm..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Exterior Notes</label>
                        <textarea class="form-textarea" name="exteriorNotes" placeholder="Additional observations about exterior condition..."></textarea>
                    </div>
                </div>

                <!-- INTERIOR INSPECTION -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-couch"></i></div>
                        <div class="section-title">Interior Inspection</div>
                    </div>
                    <div class="checklist-grid">
                        <div class="check-item">
                            <input type="checkbox" id="int1" name="interiorChecks" value="Dashboard - Clean & intact">
                            <label for="int1">Dashboard - Clean & intact</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int2" name="interiorChecks" value="Steering Wheel - Good grip">
                            <label for="int2">Steering Wheel - Good grip</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int3" name="interiorChecks" value="Seats - No tears/stains">
                            <label for="int3">Seats - No tears/stains</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int4" name="interiorChecks" value="Seat Belts - Working">
                            <label for="int4">Seat Belts - Working</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int5" name="interiorChecks" value="AC Vents - All functional">
                            <label for="int5">AC Vents - All functional</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int6" name="interiorChecks" value="Music System - Working">
                            <label for="int6">Music System - Working</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int7" name="interiorChecks" value="Power Windows - Operational">
                            <label for="int7">Power Windows - Operational</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int8" name="interiorChecks" value="Central Locking - Works">
                            <label for="int8">Central Locking - Works</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int9" name="interiorChecks" value="Instrument Cluster - All gauges work">
                            <label for="int9">Instrument Cluster - All gauges work</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int10" name="interiorChecks" value="Horn - Functional">
                            <label for="int10">Horn - Functional</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int11" name="interiorChecks" value="Floor Mats - Clean">
                            <label for="int11">Floor Mats - Clean</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="int12" name="interiorChecks" value="Upholstery - Good condition">
                            <label for="int12">Upholstery - Good condition</label>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Interior Notes</label>
                        <textarea class="form-textarea" name="interiorNotes" placeholder="Additional observations about interior condition..."></textarea>
                    </div>
                </div>

                <!-- ENGINE & MECHANICAL -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-cog"></i></div>
                        <div class="section-title">Engine & Mechanical Inspection</div>
                    </div>
                    <div class="checklist-grid">
                        <div class="check-item">
                            <input type="checkbox" id="eng1" name="engineChecks" value="Engine starts smoothly">
                            <label for="eng1">Engine starts smoothly</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng2" name="engineChecks" value="No oil leaks">
                            <label for="eng2">No oil leaks</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng3" name="engineChecks" value="No coolant leaks">
                            <label for="eng3">No coolant leaks</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng4" name="engineChecks" value="Battery - Good condition">
                            <label for="eng4">Battery - Good condition</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng5" name="engineChecks" value="Alternator - Working">
                            <label for="eng5">Alternator - Working</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng6" name="engineChecks" value="Radiator - No damage">
                            <label for="eng6">Radiator - No damage</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng7" name="engineChecks" value="Exhaust - No unusual smoke">
                            <label for="eng7">Exhaust - No unusual smoke</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng8" name="engineChecks" value="Transmission - Smooth shifting">
                            <label for="eng8">Transmission - Smooth shifting</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng9" name="engineChecks" value="Clutch - Good grip (MT)">
                            <label for="eng9">Clutch - Good grip (MT)</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng10" name="engineChecks" value="Suspension - No unusual noise">
                            <label for="eng10">Suspension - No unusual noise</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng11" name="engineChecks" value="Brakes - Responsive">
                            <label for="eng11">Brakes - Responsive</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="eng12" name="engineChecks" value="Steering - No play">
                            <label for="eng12">Steering - No play</label>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Estimated Repair Cost (if applicable)</label>
                        <input type="text" class="form-input" name="repairCost" placeholder="₹ 0">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Engine Notes</label>
                        <textarea class="form-textarea" name="engineNotes" placeholder="Additional observations about engine and mechanical condition..."></textarea>
                    </div>
                </div>

                <!-- TIRES & WHEELS -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-circle-notch"></i></div>
                        <div class="section-title">Tires & Wheels Inspection</div>
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Front LHS Tire</label>
                            <input type="text" class="form-input" name="tireFrontLHS" placeholder="Brand, % remaining, condition">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Front RHS Tire</label>
                            <input type="text" class="form-input" name="tireFrontRHS" placeholder="Brand, % remaining, condition">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rear LHS Tire</label>
                            <input type="text" class="form-input" name="tireRearLHS" placeholder="Brand, % remaining, condition">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rear RHS Tire</label>
                            <input type="text" class="form-input" name="tireRearRHS" placeholder="Brand, % remaining, condition">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Spare Tire</label>
                            <input type="text" class="form-input" name="tireSpare" placeholder="Brand, % remaining, condition">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Alloy Wheels Condition</label>
                            <select class="form-select" name="wheelCondition">
                                <option value="Excellent">Excellent</option>
                                <option value="Good">Good</option>
                                <option value="Average">Average</option>
                                <option value="Needs Attention">Needs Attention</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Tires Notes</label>
                        <textarea class="form-textarea" name="tiresNotes" placeholder="Additional observations about tires and wheels..."></textarea>
                    </div>
                </div>

                <!-- TEST DRIVE -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-road"></i></div>
                        <div class="section-title">Test Drive Assessment</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Test Drive Conducted? *</label>
                        <div class="rating-group">
                            <div class="rating-option">
                                <input type="radio" id="testYes" name="testDrive" value="Yes" checked>
                                <label for="testYes" class="rating-label">✓ Yes</label>
                            </div>
                            <div class="rating-option">
                                <input type="radio" id="testNo" name="testDrive" value="No">
                                <label for="testNo" class="rating-label">✗ No</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Test Drive Observations</label>
                        <textarea class="form-textarea" name="testDriveNotes" placeholder="Engine performance, gear shifting, brakes response, handling, noise levels, vibrations, AC performance..."></textarea>
                    </div>
                </div>

                <!-- STRUCTURE & UNDERCARRIAGE -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-layer-group"></i></div>
                        <div class="section-title">Structure & Undercarriage</div>
                    </div>
                    <div class="checklist-grid">
                        <div class="check-item">
                            <input type="checkbox" id="str1" name="structureChecks" value="Chassis - No damage">
                            <label for="str1">Chassis - No damage</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="str2" name="structureChecks" value="Frame - Aligned properly">
                            <label for="str2">Frame - Aligned properly</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="str3" name="structureChecks" value="Underbody - No rust">
                            <label for="str3">Underbody - No rust</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="str4" name="structureChecks" value="Exhaust System - Secure">
                            <label for="str4">Exhaust System - Secure</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="str5" name="structureChecks" value="Fuel Tank - No leaks">
                            <label for="str5">Fuel Tank - No leaks</label>
                        </div>
                        <div class="check-item">
                            <input type="checkbox" id="str6" name="structureChecks" value="Shock Absorbers - Good">
                            <label for="str6">Shock Absorbers - Good</label>
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label class="form-label">Structure Notes</label>
                        <textarea class="form-textarea" name="structureNotes" placeholder="Additional observations about structure and undercarriage..."></textarea>
                    </div>
                </div>

                <!-- OVERALL ASSESSMENT -->
                <div class="section">
                    <div class="section-header">
                        <div class="section-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="section-title">Overall Assessment</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Overall Condition Rating *</label>
                        <div class="rating-group">
                            <div class="rating-option">
                                <input type="radio" id="excellent" name="overallRating" value="Excellent">
                                <label for="excellent" class="rating-label">⭐⭐⭐⭐⭐ Excellent</label>
                            </div>
                            <div class="rating-option">
                                <input type="radio" id="good" name="overallRating" value="Good" checked>
                                <label for="good" class="rating-label">⭐⭐⭐⭐ Good</label>
                            </div>
                            <div class="rating-option">
                                <input type="radio" id="average" name="overallRating" value="Average">
                                <label for="average" class="rating-label">⭐⭐⭐ Average</label>
                            </div>
                            <div class="rating-option">
                                <input type="radio" id="poor" name="overallRating" value="Poor">
                                <label for="poor" class="rating-label">⭐⭐ Poor</label>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Major Issues Found</label>
                        <textarea class="form-textarea" name="issuesFound" placeholder="List any major issues, defects, or concerns discovered during inspection..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Recommendations</label>
                        <textarea class="form-textarea" name="recommendations" placeholder="Suggest repairs, maintenance, or actions required. Provide buying advice if applicable..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Market Value Estimate</label>
                        <input type="text" class="form-input" name="marketValue" placeholder="₹ Estimated market value">
                    </div>
                </div>

                <!-- SUBMIT SECTION -->
                <div class="submit-section">
                    <h3 style="margin-bottom: 20px; color: #2d3748;">Ready to Generate Report?</h3>
                    <p style="margin-bottom: 30px; color: #4a5568;">Please review all information before submitting. A professional PDF report will be generated.</p>
                    <button type="submit" class="btn-submit" id="submitBtn">
                        <i class="fas fa-file-pdf"></i> Generate Inspection Report
                    </button>
                    <div id="statusMessage"></div>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Load inspector name from sessionStorage
        document.addEventListener('DOMContentLoaded', () => {
            const token = sessionStorage.getItem('inspectorToken');
            const inspectorName = sessionStorage.getItem('inspectorName');
            
            if (!token) {
                window.location.href = 'inspector-login.html';
                return;
            }
            
            if (inspectorName) {
                document.getElementById('inspectorName').textContent = `Inspector: ${inspectorName}`;
            }

            // Check for cached form data
            checkForCachedData();
        });

        function logout() {
            sessionStorage.clear();
            window.location.href = 'inspector-login.html';
        }

        function checkForCachedData() {
            const cachedData = sessionStorage.getItem('formData');
            const cacheTimestamp = sessionStorage.getItem('formDataTimestamp');
            
            if (cachedData && cacheTimestamp) {
                const cacheAge = Date.now() - parseInt(cacheTimestamp);
                const thirtyMinutes = 30 * 60 * 1000;
                
                if (cacheAge < thirtyMinutes) {
                    if (confirm('We found unsaved form data from your previous session. Would you like to restore it?')) {
                        restoreFormData(JSON.parse(cachedData));
                    } else {
                        sessionStorage.removeItem('formData');
                        sessionStorage.removeItem('formDataTimestamp');
                    }
                }
            }
        }

        function restoreFormData(data) {
            Object.keys(data).forEach(key => {
                const element = document.querySelector(`[name="${key}"]`);
                if (element) {
                    if (element.type === 'checkbox' || element.type === 'radio') {
                        if (Array.isArray(data[key])) {
                            data[key].forEach(val => {
                                const checkbox = document.querySelector(`input[name="${key}"][value="${val}"]`);
                                if (checkbox) checkbox.checked = true;
                            });
                        } else {
                            const radio = document.querySelector(`input[name="${key}"][value="${data[key]}"]`);
                            if (radio) radio.checked = true;
                        }
                    } else {
                        element.value = data[key];
                    }
                }
            });
        }

        // Handle form submission
        document.getElementById('inspectionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const statusDiv = document.getElementById('statusMessage');
            
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Generating Report...';
            
            const formData = new FormData(e.target);
            const data = {};
            
            // Convert FormData to JSON, handling checkboxes
            for (const [key, value] of formData.entries()) {
                if (data[key]) {
                    if (Array.isArray(data[key])) {
                        data[key].push(value);
                    } else {
                        data[key] = [data[key], value];
                    }
                } else {
                    data[key] = value;
                }
            }
            
            // Add token and inspector name
            data.token = sessionStorage.getItem('inspectorToken');
            data.inspectorName = sessionStorage.getItem('inspectorName');
            
            // Cache form data before submission
            sessionStorage.setItem('formData', JSON.stringify(data));
            sessionStorage.setItem('formDataTimestamp', Date.now().toString());
            
            try {
                const response = await fetch('https://46kj4yz4qy7q7uuvgbfr6nz2uy0qxdiz.lambda-url.us-east-1.on.aws/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok && result.reportUrl) {
                    statusDiv.className = 'status-message status-success';
                    statusDiv.innerHTML = `
                        <i class="fas fa-check-circle"></i> Report generated successfully!<br>
                        <a href="${result.reportUrl}" target="_blank" style="color: #155724; text-decoration: underline; font-weight: bold; margin-top: 10px; display: inline-block;">
                            <i class="fas fa-download"></i> Download PDF Report
                        </a>
                    `;
                    
                    // Clear cached data on success
                    sessionStorage.removeItem('formData');
                    sessionStorage.removeItem('formDataTimestamp');
                    
                    // Reset form after a delay
                    setTimeout(() => {
                        if (confirm('Report generated successfully! Would you like to start a new inspection?')) {
                            e.target.reset();
                            statusDiv.innerHTML = '';
                        }
                    }, 2000);
                } else {
                    throw new Error(result.message || 'Failed to generate report');
                }
            } catch (error) {
                console.error('Submission error:', error);
                statusDiv.className = 'status-message status-error';
                statusDiv.innerHTML = `
                    <i class="fas fa-exclamation-circle"></i> Error: ${error.message}<br>
                    <small>Your data has been saved. Please try again.</small>
                `;
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-file-pdf"></i> Generate Inspection Report';
            }
        });
    </script>
</body>
</html>
